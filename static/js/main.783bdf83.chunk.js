(this["webpackJsonpanimal-race-game"]=this["webpackJsonpanimal-race-game"]||[]).push([[0],{10:function(e,t,n){},11:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),c=n(3),a=n.n(c),s=n(0);const l=["\ud83d\udc36","\ud83d\udc31","\ud83d\udc30","\ud83d\udc22","\ud83d\udc34"];var o=e=>{let{participants:t,addParticipant:n,removeParticipant:r}=e;const[c,a]=Object(i.useState)(""),[o,j]=Object(i.useState)("random"),d=Object(i.useRef)(null);return Object(s.jsxs)("div",{className:"participant-form",children:[Object(s.jsx)("h2",{children:"Join the Race"}),Object(s.jsx)("input",{ref:d,type:"text",placeholder:"Enter your name",value:c,onChange:e=>a(e.target.value)}),Object(s.jsxs)("select",{value:o,onChange:e=>j(e.target.value),children:[Object(s.jsx)("option",{value:"random",children:"Random Animal"}),l.map(((e,t)=>Object(s.jsx)("option",{value:e,children:e},t)))]}),Object(s.jsx)("button",{onClick:()=>{if(!c.trim())return void alert("\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(t.some((e=>e.name.toLowerCase()===c.trim().toLowerCase())))return void alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uc774\ub984\uc785\ub2c8\ub2e4. \ub2e4\ub978 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");const e="random"===o?l[Math.floor(Math.random()*l.length)]:o;n({name:c.trim(),animal:e}),a(""),j("random"),d.current&&d.current.focus()},children:"Add Participant"}),Object(s.jsx)("ul",{children:t.map(((e,n)=>Object(s.jsxs)("li",{children:[e.name," (",e.animal,")",Object(s.jsx)("button",{onClick:()=>(e=>{r(t[e].name)})(n),children:"Remove"})]},n)))}),t.length<1&&Object(s.jsx)("p",{children:"At least one participant is required."})]})};var j=e=>{let{participants:t,raceInProgress:n,onRaceComplete:r}=e;const[c,a]=Object(i.useState)([]),l=Object(i.useRef)(null),o=Object(i.useRef)(null),j=Object(i.useRef)(0),d=Object(i.useRef)(!1);return Object(i.useEffect)((()=>(n&&(d.current=!1,j.current=performance.now(),a(t.map((()=>({position:0,speed:2*Math.random()+.7,finishTime:null})))),l.current=setInterval((()=>{a((e=>e.map((e=>{if(null!==e.finishTime)return e;let t=e.position+e.speed,n=2*Math.random()+.7,i=e.finishTime;return t>=95&&(t=95,i=(performance.now()-j.current)/1e3,n=0),{position:t,speed:n,finishTime:i}}))))}),250)),()=>{l.current&&clearInterval(l.current)})),[n,t]),Object(i.useEffect)((()=>{if(n&&c.length>0&&c.every((e=>null!==e.finishTime))&&!d.current){d.current=!0,l.current&&clearInterval(l.current);const e=t.map(((e,t)=>{var n;return{name:e.name,icon:e.animal,finishTime:null!==(n=c[t].finishTime)&&void 0!==n?n:0}}));e.sort(((e,t)=>e.finishTime-t.finishTime)),o.current=setTimeout((()=>{r(e)}),0)}return()=>{o.current&&clearTimeout(o.current)}}),[c,n,t,r]),Object(s.jsxs)("div",{className:"race-track",style:{position:"relative",height:60*t.length+"px",border:"1px solid #000",marginBottom:"20px",overflow:"hidden"},children:[Object(s.jsx)("div",{style:{position:"absolute",left:"95%",top:0,bottom:0,width:"5px",backgroundColor:"red"}}),t.map(((e,t)=>{var n,i;return Object(s.jsxs)("div",{className:"race-participant",style:{position:"absolute",left:`${null!==(n=null===(i=c[t])||void 0===i?void 0:i.position)&&void 0!==n?n:0}%`,top:60*t+10+"px",transition:"left 0.3s linear",display:"flex",alignItems:"center",width:"150px"},children:[Object(s.jsx)("span",{style:{marginRight:"8px",fontSize:"1.5rem"},children:e.animal}),Object(s.jsx)("span",{children:e.name})]},t)}))]})};var d=e=>{let{participants:t,onRaceEnd:n}=e;const[r,c]=Object(i.useState)(!1),[a,l]=Object(i.useState)([]);return Object(s.jsxs)("div",{className:"game-container",children:[Object(s.jsx)(j,{participants:t,raceInProgress:r,onRaceComplete:e=>{l(e),c(!1),n(e)}}),a.length>0&&Object(s.jsxs)("div",{className:"results",children:[Object(s.jsx)("h2",{children:"Race Results"}),Object(s.jsx)("ul",{children:a.map(((e,t)=>Object(s.jsxs)("li",{children:[e.name," - ",t+1," place (Time: ",e.finishTime.toFixed(5),"s)"]},t)))})]}),Object(s.jsx)("button",{onClick:()=>{c(!0),l([])},disabled:r,children:"Start Race"})]})};var u=e=>{let{raceHistories:t}=e;if(!t||0===t.length)return Object(s.jsx)("div",{children:"No race history available"});const n=t.slice(0,5);return Object(s.jsxs)("div",{className:"history",children:[Object(s.jsx)("h2",{children:"Race History"}),Object(s.jsx)("ul",{children:n.map(((e,t)=>Object(s.jsxs)("li",{children:[Object(s.jsxs)("h3",{children:["Race ",t+1]}),Object(s.jsx)("ul",{children:e.map(((e,t)=>Object(s.jsxs)("li",{children:[e.name," ",e.icon," - Time: ",e.finishTime.toFixed(5),"s"]},t)))})]},t)))})]})};n(9);var m=()=>{const[e,t]=Object(i.useState)([]),[n,r]=Object(i.useState)([]),[c,a]=Object(i.useState)(!1),[l,j]=Object(i.useState)(null);return Object(s.jsxs)("div",{className:"app",children:[Object(s.jsx)("h1",{children:"Animal Race Game"}),c?Object(s.jsx)(d,{participants:e,onRaceEnd:e=>{j(e),r((t=>[e,...t].slice(0,5))),a(!1)}}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(o,{participants:e,addParticipant:e=>{t((t=>[...t,e]))},removeParticipant:e=>{t((t=>t.filter((t=>t.name!==e))))}}),Object(s.jsx)("button",{onClick:()=>{a(!0)},disabled:0===e.length,children:"Start Race"})]}),Object(s.jsx)(u,{raceHistories:n})]})};n(10);a.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(m,{})}),document.getElementById("root"))},9:function(e,t,n){}},[[11,1,2]]]);
//# sourceMappingURL=main.783bdf83.chunk.js.map