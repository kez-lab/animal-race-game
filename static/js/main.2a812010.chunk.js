(this["webpackJsonpanimal-race-game"]=this["webpackJsonpanimal-race-game"]||[]).push([[0],{10:function(e,t,a){},11:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(3),i=a.n(c),l=a(0);const r=[{value:"\ud83d\udc0e",label:"\ub9d0"},{value:"\ud83d\udc05",label:"\ud638\ub791\uc774"},{value:"\ud83d\udc07",label:"\ud1a0\ub07c"},{value:"\ud83e\udd8a",label:"\uc5ec\uc6b0"},{value:"\ud83e\udd98",label:"\ucea5\uac70\ub8e8"},{value:"\ud83e\udd8c",label:"\uc0ac\uc2b4"},{value:"\ud83d\udc06",label:"\uce58\ud0c0"},{value:"\ud83e\udd92",label:"\uae30\ub9b0"}];var o=e=>{let{participants:t,addParticipant:a,removeParticipant:s}=e;const[c,i]=Object(n.useState)(""),[o,m]=Object(n.useState)("random"),[j,d]=Object(n.useState)("");return Object(l.jsxs)("div",{className:"participant-form",children:[Object(l.jsx)("h2",{children:"\ucc38\uac00\uc790 \ub4f1\ub85d"}),Object(l.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!c.trim())return void d("\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694");if(t.some((e=>e.name===c)))return void d("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uc774\ub984\uc785\ub2c8\ub2e4");if(t.length>=15)return void d("\ucd5c\ub300 15\uba85\uae4c\uc9c0\ub9cc \ucc38\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4");const n="random"===o?r[Math.floor(Math.random()*r.length)].value:o;a({name:c.trim(),animal:n}),i(""),m("random"),d("")},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"name",children:"\uc774\ub984"}),Object(l.jsx)("input",{id:"name",type:"text",value:c,onChange:e=>i(e.target.value),placeholder:"\ucc38\uac00\uc790 \uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694",maxLength:10})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"animal",children:"\ub3d9\ubb3c \uc120\ud0dd"}),Object(l.jsxs)("select",{id:"animal",value:o,onChange:e=>m(e.target.value),children:[Object(l.jsx)("option",{value:"random",children:"\ud83c\udfb2 \ub79c\ub364 \uc120\ud0dd"}),r.map((e=>Object(l.jsxs)("option",{value:e.value,children:[e.value," ",e.label]},e.value)))]})]}),j&&Object(l.jsx)("div",{className:"error-message",children:j}),Object(l.jsx)("button",{type:"submit",children:"\ucc38\uac00\uc790 \ucd94\uac00"})]}),Object(l.jsx)("div",{className:"participants-list",children:t.map((e=>Object(l.jsxs)("div",{className:"participant-card",children:[Object(l.jsxs)("div",{className:"participant-info",children:[Object(l.jsx)("span",{className:"participant-animal",children:e.animal}),Object(l.jsx)("span",{className:"participant-name",children:e.name})]}),Object(l.jsx)("button",{className:"remove-button",onClick:()=>s(e.name),children:"\uc0ad\uc81c"})]},e.name)))})]})};var m=e=>{let{participants:t,raceInProgress:a,onRaceComplete:s}=e;const[c,i]=Object(n.useState)([]),[r,o]=Object(n.useState)(null),m=Object(n.useRef)(null),j=Object(n.useRef)(null),d=Object(n.useRef)(0),u=Object(n.useRef)(!1);Object(n.useEffect)((()=>{if(a){u.current=!1,o(3);const e=setInterval((()=>{o((t=>null===t||t<=1?(clearInterval(e),h(),null):t-1))}),1e3);return()=>{clearInterval(e)}}}),[a]);const h=()=>{d.current=performance.now();const e=Array.from({length:t.length},((e,t)=>t));for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}i(t.map(((t,a)=>({position:0,speed:.2+.2*Math.random(),finishTime:null,lane:e[a],obstacle:Math.random()>.7,currentRank:a+1})))),m.current=setInterval((()=>{i((e=>(e=>{const t=[...e.map(((e,t)=>({...e,originalIndex:t}))).filter((e=>null!==e.finishTime)).sort(((e,t)=>{var a,n;return(null!==(a=e.finishTime)&&void 0!==a?a:0)-(null!==(n=t.finishTime)&&void 0!==n?n:0)})),...e.map(((e,t)=>({...e,originalIndex:t}))).filter((e=>null===e.finishTime)).sort(((e,t)=>t.position-e.position))];return e.map(((e,a)=>{const n=t.find((e=>e.originalIndex===a));return{...e,currentRank:n?t.indexOf(n)+1:a+1}}))})(e.map((e=>{if(null!==e.finishTime)return e;let t=e.obstacle?.7:1,a=.5*(2*Math.random()-1),n=e.speed*(1+a);n=Math.max(.05,Math.min(.6,n));let s=e.position+n*t,c=e.finishTime;return s>=90&&(s=90,c=(performance.now()-d.current)/1e3,n=0),{...e,position:s,speed:n,finishTime:c}})))))}),50)};return Object(n.useEffect)((()=>((()=>{if(a&&c.length>0&&c.every((e=>null!==e.finishTime))&&!u.current){u.current=!0,m.current&&(clearInterval(m.current),m.current=null);const e=c.map(((e,a)=>{var n;return{name:t[a].name,icon:t[a].animal,finishTime:null!==(n=e.finishTime)&&void 0!==n?n:0}})).sort(((e,t)=>e.finishTime-t.finishTime));s(e)}})(),()=>{m.current&&(clearInterval(m.current),m.current=null),j.current&&(clearTimeout(j.current),j.current=null)})),[c,a,t,s]),Object(l.jsxs)("div",{className:"race-track-container",children:[null!==r&&Object(l.jsx)("div",{className:"countdown",children:Object(l.jsx)("div",{className:"countdown-number",children:r})}),Object(l.jsxs)("div",{className:"race-track",children:[Array.from({length:t.length}).map(((e,t)=>Object(l.jsx)("div",{className:"race-lane",style:{position:"absolute",top:40*t+"px",left:0,right:0,height:"40px",backgroundColor:t%2===0?"#f8f9fa":"#e9ecef",borderBottom:"1px solid #dee2e6"}},`lane-${t}`))),Object(l.jsx)("div",{className:"finish-line"}),t.map(((e,t)=>{const a=c[t];return a?Object(l.jsxs)("div",{className:"race-lane-container",style:{position:"absolute",top:40*a.lane+"px",left:0,right:0,height:"40px"},children:[Object(l.jsx)("div",{className:"race-participant",style:{position:"absolute",left:`${a.position}%`,top:"50%",transform:"translateY(-50%)"},children:Object(l.jsxs)("div",{className:"participant-rank-container",children:[Object(l.jsxs)("div",{className:"participant-rank",children:[a.currentRank,"\uc704"]}),Object(l.jsx)("div",{className:"participant-animal",children:e.animal})]})}),Object(l.jsx)("div",{className:"participant-name",style:{position:"absolute",left:"10px",top:"5px"},children:e.name}),a.obstacle&&Object(l.jsx)("span",{className:"obstacle",style:{position:"absolute",left:"40%",top:"50%",transform:"translateY(-50%)"},children:"\ud83c\udf33"})]},e.name):null}))]})]})};var j=e=>{let{participants:t,onRaceEnd:a}=e;const[s,c]=Object(n.useState)(!0);return Object(l.jsx)("div",{className:"game",children:Object(l.jsx)(m,{participants:t,raceInProgress:s,onRaceComplete:e=>{console.log("Race completed in Game component:",e),c(!1),setTimeout((()=>{a(e)}),500)}})})};var d=e=>{let{raceHistories:t}=e;return 0===t.length?null:Object(l.jsxs)("div",{className:"history-section",children:[Object(l.jsx)("h2",{className:"history-title",children:"\uacbd\uc8fc \uae30\ub85d"}),Object(l.jsx)("div",{className:"history-list",children:t.map(((e,a)=>Object(l.jsxs)("div",{className:"history-item",children:[Object(l.jsxs)("h3",{className:"race-number",children:["Race #",t.length-a]}),Object(l.jsx)("div",{className:"results-list",children:e.map(((e,t)=>Object(l.jsxs)("div",{className:"result-item "+(0===t?"winner":""),children:[Object(l.jsxs)("div",{className:"position",children:[0===t&&Object(l.jsx)("span",{className:"crown",children:"\ud83d\udc51"}),t+1,"\uc704"]}),Object(l.jsxs)("div",{className:"participant-info",children:[Object(l.jsx)("span",{className:"animal",children:e.icon}),Object(l.jsx)("span",{className:"name",children:e.name})]}),Object(l.jsxs)("div",{className:"time",children:[e.finishTime.toFixed(2),"\ucd08"]})]},e.name)))})]},a)))})]})};var u=e=>{let{results:t,onNewRace:a}=e;return Object(l.jsxs)("div",{className:"race-results",children:[Object(l.jsx)("h2",{children:"\ud83c\udfc1 \uacbd\uc8fc \uacb0\uacfc"}),Object(l.jsx)("div",{className:"results-container",children:t.map(((e,t)=>Object(l.jsxs)("div",{className:"result-item "+(0===t?"winner":""),style:{animation:`slideIn ${.3+.1*t}s ease-out`},children:[Object(l.jsxs)("div",{className:"rank",children:[0===t&&Object(l.jsx)("span",{className:"crown",children:"\ud83d\udc51"}),t+1,"\uc704"]}),Object(l.jsxs)("div",{className:"participant-info",children:[Object(l.jsx)("span",{className:"animal",children:e.icon}),Object(l.jsx)("span",{className:"name",children:e.name})]}),Object(l.jsxs)("div",{className:"finish-time",children:[e.finishTime.toFixed(2),"\ucd08"]})]},e.name)))}),Object(l.jsx)("button",{className:"new-race-button",onClick:a,children:"\uc0c8\ub85c\uc6b4 \uacbd\uc8fc \uc2dc\uc791"})]})};a(9);var h=()=>{const[e,t]=Object(n.useState)([]),[a,s]=Object(n.useState)([]),[c,i]=Object(n.useState)(!1),[r,m]=Object(n.useState)(null);return console.log("Current state:",{isRaceStarted:c,hasCurrentResults:null!==r,participantsCount:e.length}),Object(l.jsxs)("div",{className:"app",children:[Object(l.jsx)("h1",{children:"\ud83c\udfc3\u200d\u2642\ufe0f \ub3d9\ubb3c \ub808\uc774\uc2a4 \uac8c\uc784 \ud83c\udfc3\u200d\u2640\ufe0f"}),!c&&!r&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(o,{participants:e,addParticipant:e=>{t((t=>[...t,e]))},removeParticipant:e=>{t((t=>t.filter((t=>t.name!==e))))}}),Object(l.jsx)("button",{onClick:()=>{i(!0),m(null)},disabled:e.length<2,className:"start-race-button",children:e.length<2?"\ucd5c\uc18c 2\uba85\uc758 \ucc38\uac00\uc790\uac00 \ud544\uc694\ud569\ub2c8\ub2e4":"\uacbd\uc8fc \uc2dc\uc791!"})]}),c&&Object(l.jsx)(j,{participants:e,onRaceEnd:e=>{console.log("Race ended with results:",e),m(e),s((t=>[e,...t].slice(0,5))),i(!1)}}),r&&!c&&Object(l.jsx)(u,{results:r,onNewRace:()=>{m(null)}}),a.length>0&&Object(l.jsx)(d,{raceHistories:a})]})};a(10);i.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(h,{})}),document.getElementById("root"))},9:function(e,t,a){}},[[11,1,2]]]);
//# sourceMappingURL=main.2a812010.chunk.js.map